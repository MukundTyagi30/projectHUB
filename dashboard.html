<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProjectHub - Dashboard</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#6610f2',
            secondary: '#e84393',
            accent: '#00cec9',
            success: '#00b894',
            warning: '#fdcb6e',
            danger: '#d63031',
            dark: '#18191a',
            'dark-card': 'rgba(14, 14, 18, 0.8)',
            'text-light': '#e1e2e5',
            'text-dim': '#a8a9ad',
          },
          fontFamily: {
            sans: ['Space Grotesk', 'sans-serif'],
          },
          boxShadow: {
            card: '0 20px 50px rgba(0, 0, 0, 0.5)',
            button: '0 10px 20px rgba(102, 16, 242, 0.3)',
          },
          backgroundImage: {
            'gradient-primary': 'linear-gradient(45deg, var(--tw-gradient-from), var(--tw-gradient-to))',
          },
          animation: {
            'float': 'float 3s ease-in-out infinite',
            'glow': 'glow 3s ease-in-out infinite',
            'spin-slow': 'spin 15s linear infinite',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-10px)' },
            },
            glow: {
              '0%, 100%': { filter: 'brightness(1)' },
              '50%': { filter: 'brightness(1.2)' },
            }
          }
        }
      }
    }
  </script>
  <style>
    /* Base styles that match the existing theme */
    .bg-space {
      background-color: #18191a;
      background-image: radial-gradient(circle at 70% 80%, rgba(102, 16, 242, 0.2), transparent 25%),
                        radial-gradient(circle at 30% 20%, rgba(232, 67, 147, 0.2), transparent 25%),
                        radial-gradient(circle at 90% 30%, rgba(0, 206, 201, 0.2), transparent 20%);
    }
    
    .noise-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 250 250' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
      opacity: 0.03;
      pointer-events: none;
      z-index: 1;
    }
    
    .glow-border::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, #6610f2, #e84393);
      z-index: -1;
      border-radius: inherit;
      opacity: 0.6;
      filter: blur(10px);
      animation: borderGlow 5s infinite alternate;
    }
    
    @keyframes borderGlow {
      0% {
        opacity: 0.3;
        filter: blur(10px);
      }
      100% {
        opacity: 0.6;
        filter: blur(20px);
      }
    }
    
    .particle {
      position: absolute;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      pointer-events: none;
      animation: float 10s linear infinite;
      opacity: 0.5;
    }
    
    @keyframes float {
      0% {
        transform: translateY(0) rotate(0deg);
      }
      100% {
        transform: translateY(-100vh) rotate(360deg);
      }
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    /* Glass card effect */
    .glass-card {
      background-color: rgba(14, 14, 18, 0.7);
      backdrop-filter: blur(10px);
      border-radius: 16px;
    }
    
    /* Gradient text */
    .gradient-text {
      background: linear-gradient(135deg, #6610f2, #e84393);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    /* Light mode styles */
    .light-mode {
      --bg-color: #f8fafc;
      --text-light: #1e293b;
      --text-dim: #64748b;
      --card-bg: rgba(255, 255, 255, 0.85);
      --border-color: #e2e8f0;
    }
    
    .light-mode .bg-space {
      background-color: #f8fafc;
      background-image: 
        radial-gradient(circle at 70% 80%, rgba(102, 16, 242, 0.08), transparent 25%),
        radial-gradient(circle at 30% 20%, rgba(232, 67, 147, 0.08), transparent 25%),
        radial-gradient(circle at 90% 30%, rgba(0, 206, 201, 0.08), transparent 25%);
    }
    
    .light-mode .glass-card {
      background-color: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border-color);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }
    
    .light-mode .particle {
      background-color: rgba(102, 16, 242, 0.15);
    }
    
    .light-mode .text-text-light {
      color: var(--text-light);
    }
    
    .light-mode .text-text-dim {
      color: var(--text-dim);
    }
    
    .light-mode .hover\:bg-gray-800:hover {
      background-color: rgba(241, 245, 249, 0.7);
    }
    
    .light-mode .border-gray-800 {
      border-color: #e2e8f0;
    }
    
    .light-mode .bg-gray-800\/50 {
      background-color: rgba(241, 245, 249, 0.7);
    }
    
    .light-mode .hover\:bg-gray-700\/50:hover {
      background-color: rgba(226, 232, 240, 0.8);
    }
    
    .light-mode .bg-gray-800 {
      background-color: #f1f5f9;
    }
    
    .light-mode .hover\:bg-gray-700:hover {
      background-color: #e2e8f0;
    }
    
    .light-mode .border-gray-700 {
      border-color: #cbd5e1;
    }
    
    /* Empty state styles */
    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 3rem 1rem;
      text-align: center;
    }
    
    .empty-state-icon {
      width: 100px;
      height: 100px;
      margin-bottom: 1.5rem;
      opacity: 0.5;
      animation: float 3s ease-in-out infinite;
    }
    
    .empty-state-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, #6610f2, #e84393);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .empty-state-message {
      color: var(--text-dim);
      max-width: 400px;
      margin: 0 auto;
    }
    
    .empty-state-button {
      margin-top: 1.5rem;
      padding: 0.5rem 1.5rem;
      border-radius: 0.5rem;
      font-weight: 500;
      transition: all 0.3s;
      background: linear-gradient(135deg, rgba(102, 16, 242, 0.1), rgba(232, 67, 147, 0.1));
      border: 1px solid rgba(102, 16, 242, 0.2);
      color: var(--text-light);
    }
    
    .empty-state-button:hover {
      transform: translateY(-2px);
      background: linear-gradient(135deg, rgba(102, 16, 242, 0.2), rgba(232, 67, 147, 0.2));
      box-shadow: 0 4px 12px rgba(102, 16, 242, 0.1);
    }
  </style>
</head>
<body class="bg-space text-text-light font-sans min-h-screen">
  <!-- Noise overlay -->
  <div class="noise-overlay"></div>
  
  <!-- Animated background particles will be added via JavaScript -->
  <div id="particles-container" class="fixed inset-0 z-0"></div>
  
  <!-- Main content -->
  <div class="relative z-10">
    <!-- Navigation Bar -->
    <nav class="glass-card sticky top-0 z-50 border border-gray-800 shadow-lg">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
          <div class="flex items-center">
            <!-- Logo -->
            <div class="flex-shrink-0 flex items-center">
              <div class="w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-lg flex items-center justify-center mr-3 shadow-md">
                <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12,2L2,12h3v8h6v-6h2v6h6v-8h3L12,2z M12,6.5L15.5,10H15v6h-2v-6h-2v6H9v-6H8.5L12,6.5z"/>
                </svg>
              </div>
              <span class="text-xl font-bold gradient-text">ProjectHub</span>
            </div>
          </div>
          
          <!-- Welcome Message - Hidden on mobile -->
          <div class="hidden md:flex items-center">
            <span class="text-text-light">Welcome, <span class="font-bold text-accent">Mukund</span>!</span>
          </div>
          
          <!-- Right side with profile -->
          <div class="flex items-center space-x-4">
            <!-- Dark/Light Mode Toggle -->
            <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-800 relative text-text-dim">
              <!-- Sun icon (for dark mode) -->
              <svg id="light-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
              </svg>
              <!-- Moon icon (for light mode) -->
              <svg id="dark-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
              </svg>
            </button>
            
            <!-- Notification Bell -->
            <button class="p-2 rounded-full hover:bg-gray-800 relative">
              <svg class="w-6 h-6 text-text-dim" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
              </svg>
              <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
            </button>
            
            <!-- Profile Dropdown -->
            <div class="relative inline-block text-left">
              <button class="flex items-center space-x-2 focus:outline-none profile-dropdown-button">
                <div class="w-9 h-9 bg-gradient-to-br from-primary to-secondary rounded-full overflow-hidden border-2 border-gray-700">
                  <img src="https://ui-avatars.com/api/?name=Mukund+Tyagi&background=random" alt="Profile" class="w-full h-full object-cover" />
                </div>
                <svg class="w-4 h-4 text-text-dim" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>
              
              <!-- Dropdown menu - hidden by default, toggled with JavaScript -->
              <div class="hidden origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg glass-card ring-1 ring-black ring-opacity-5 py-1 focus:outline-none" id="profile-dropdown">
                <a href="#" class="block px-4 py-2 text-sm text-text-light hover:bg-gray-800">Your Profile</a>
                <a href="#" class="block px-4 py-2 text-sm text-text-light hover:bg-gray-800">Settings</a>
                <div class="border-t border-gray-700 my-1"></div>
                <a href="/" class="block px-4 py-2 text-sm text-danger hover:bg-gray-800" data-action="logout">Sign out</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>
    
    <!-- Main Container -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <!-- Welcome Message - Only visible on mobile -->
      <div class="md:hidden mb-6">
        <h1 class="text-xl font-bold">Welcome, <span class="gradient-text">Mukund</span>!</h1>
      </div>
      
      <!-- Stats Cards -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
        <!-- Active Projects Card -->
        <div class="glass-card relative overflow-hidden shadow-card p-6 border border-gray-800">
          <div class="absolute top-0 right-0 -mt-2 -mr-3 w-20 h-20 rounded-full bg-primary opacity-20 blur-md"></div>
          <div class="flex items-start">
            <div class="p-3 rounded-lg bg-primary/20 mr-4">
              <svg class="w-7 h-7 text-primary" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14h-2V9h-2V7h4v10z"></path>
              </svg>
            </div>
            <div>
              <p class="text-text-dim text-sm">Active Projects</p>
              <h3 class="text-3xl font-bold mt-1 text-text-light" data-stat="active-projects">0</h3>
            </div>
          </div>
        </div>
        
        <!-- Completed Projects Card -->
        <div class="glass-card relative overflow-hidden shadow-card p-6 border border-gray-800">
          <div class="absolute top-0 right-0 -mt-2 -mr-3 w-20 h-20 rounded-full bg-success opacity-20 blur-md"></div>
          <div class="flex items-start">
            <div class="p-3 rounded-lg bg-success/20 mr-4">
              <svg class="w-7 h-7 text-success" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path>
              </svg>
            </div>
            <div>
              <p class="text-text-dim text-sm">Completed Projects</p>
              <h3 class="text-3xl font-bold mt-1 text-text-light" data-stat="completed-projects">0</h3>
            </div>
          </div>
        </div>
        
        <!-- Upcoming Deadlines Card -->
        <div class="glass-card relative overflow-hidden shadow-card p-6 border border-gray-800">
          <div class="absolute top-0 right-0 -mt-2 -mr-3 w-20 h-20 rounded-full bg-warning opacity-20 blur-md"></div>
          <div class="flex items-start">
            <div class="p-3 rounded-lg bg-warning/20 mr-4">
              <svg class="w-7 h-7 text-warning" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.2 3.2.8-1.3-4.5-2.7V7z"></path>
              </svg>
            </div>
            <div>
              <p class="text-text-dim text-sm">Upcoming Deadlines</p>
              <h3 class="text-3xl font-bold mt-1 text-text-light" data-stat="upcoming-deadlines">0</h3>
              <p class="flex items-center text-xs text-warning mt-1">
                <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span data-next-due>Check deadlines</span>
              </p>
            </div>
          </div>
        </div>
        
        <!-- Team Members Card -->
        <div class="glass-card relative overflow-hidden shadow-card p-6 border border-gray-800">
          <div class="absolute top-0 right-0 -mt-2 -mr-3 w-20 h-20 rounded-full bg-secondary opacity-20 blur-md"></div>
          <div class="flex items-start">
            <div class="p-3 rounded-lg bg-secondary/20 mr-4">
              <svg class="w-7 h-7 text-secondary" fill="currentColor" viewBox="0 0 24 24">
                <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"></path>
              </svg>
            </div>
            <div>
              <p class="text-text-dim text-sm">Team Members</p>
              <h3 class="text-3xl font-bold mt-1 text-text-light" data-stat="team-members">0</h3>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Active Projects Section -->
      <section class="mb-8">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold gradient-text">Active Projects</h2>
          <button id="new-project-btn-inline" class="px-4 py-2 text-sm rounded-lg text-white bg-primary hover:bg-primary/80 transition flex items-center gap-2">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
              <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path>
            </svg>
            Add Project
          </button>
        </div>
        
        <div id="active-projects-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <!-- Empty state (initially hidden) -->
          <div id="active-projects-empty" class="col-span-1 md:col-span-2 lg:col-span-3 glass-card border border-gray-800 overflow-hidden shadow-card">
            <div class="empty-state">
              <div class="empty-state-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="w-full h-full">
                  <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                  <polyline points="13 2 13 9 20 9"></polyline>
                  <circle cx="12" cy="14" r="4"></circle>
                  <line x1="12" y1="12" x2="12" y2="16"></line>
                  <line x1="10" y1="14" x2="14" y2="14"></line>
                </svg>
              </div>
              <h3 class="empty-state-title">No Active Projects</h3>
              <p class="empty-state-message">You don't have any active projects yet. Click the button below to create your first project.</p>
              <button class="empty-state-button" onclick="openModal()">Create Your First Project</button>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Past Projects Section -->
      <div class="mb-20">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold text-text-dim">Past Projects</h2>
        </div>
        
        <div id="past-projects-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <!-- Empty state (initially hidden) -->
          <div id="past-projects-empty" class="col-span-1 md:col-span-2 lg:col-span-3 glass-card border border-gray-800 overflow-hidden shadow-card">
            <div class="empty-state">
              <div class="empty-state-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="w-full h-full">
                  <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                  <line x1="8" y1="21" x2="16" y2="21"></line>
                  <line x1="12" y1="17" x2="12" y2="21"></line>
                </svg>
              </div>
              <h3 class="empty-state-title">No Completed Projects</h3>
              <p class="empty-state-message">You haven't completed any projects yet. Your finished projects will appear here once they're done.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- New Project Modal (hidden by default) -->
  <div id="new-project-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center">
    <!-- Modal Background Overlay -->
    <div class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>
    
    <!-- Modal Content -->
    <div class="glass-card relative rounded-2xl border border-gray-800 shadow-xl w-full max-w-md mx-4 overflow-hidden transform transition-all duration-300 scale-90 opacity-0" id="modal-content">
      <!-- Border Glow Effect -->
      <div class="absolute inset-0 rounded-2xl bg-gradient-to-r from-primary/50 to-secondary/50 blur-lg opacity-70 -z-10"></div>
      
      <!-- Close Button -->
      <button id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-white transition">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
      
      <!-- Modal Header -->
      <div class="p-6 border-b border-gray-800">
        <h3 class="text-2xl font-bold gradient-text">Create New Project</h3>
        <p class="text-text-dim text-sm mt-1">Fill in the details to start a new project.</p>
      </div>
      
      <!-- Modal Body -->
      <div class="p-6">
        <form id="new-project-form">
          <div class="space-y-4">
            <div>
              <label for="project-name" class="block text-sm font-medium text-text-light mb-1">Project Name</label>
              <input type="text" id="project-name" name="project-name" class="w-full px-4 py-2 rounded-lg bg-gray-800/50 text-text-light border border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary/50">
            </div>
            
            <div>
              <label for="project-description" class="block text-sm font-medium text-text-light mb-1">Description</label>
              <textarea id="project-description" name="project-description" rows="3" class="w-full px-4 py-2 rounded-lg bg-gray-800/50 text-text-light border border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary/50"></textarea>
            </div>
            
            <div>
              <label for="project-objectives" class="block text-sm font-medium text-text-light mb-1">Key Objectives (one per line)</label>
              <textarea id="project-objectives" name="project-objectives" rows="3" class="w-full px-4 py-2 rounded-lg bg-gray-800/50 text-text-light border border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="Enter project objectives, one per line"></textarea>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label for="start-date" class="block text-sm font-medium text-text-light mb-1">Start Date</label>
                <input type="date" id="start-date" name="start-date" class="w-full px-4 py-2 rounded-lg bg-gray-800/50 text-text-light border border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary/50">
              </div>
              
              <div>
                <label for="end-date" class="block text-sm font-medium text-text-light mb-1">Deadline</label>
                <input type="date" id="end-date" name="end-date" class="w-full px-4 py-2 rounded-lg bg-gray-800/50 text-text-light border border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary/50">
              </div>
            </div>
            
            <div>
              <label for="project-priority" class="block text-sm font-medium text-text-light mb-1">Priority</label>
              <select id="project-priority" name="project-priority" class="w-full px-4 py-2 rounded-lg bg-gray-800/50 text-text-light border border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary/50">
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
              </select>
            </div>
            
            <div>
              <label for="team-members" class="block text-sm font-medium text-text-light mb-1">Team Members</label>
              <select id="team-members" name="team-members" multiple class="w-full px-4 py-2 rounded-lg bg-gray-800/50 text-text-light border border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary/50">
                <option value="1">John Doe</option>
                <option value="2">Jane Smith</option>
                <option value="3">Mike Brown</option>
                <option value="4">Sarah Parker</option>
                <option value="5">David Miller</option>
              </select>
              <p class="text-xs text-text-dim mt-1">Hold Ctrl/Cmd to select multiple members</p>
            </div>
          </div>
          
          <div class="mt-6 flex justify-end space-x-3">
            <button type="button" id="cancel-project" class="px-4 py-2 rounded-lg text-text-light bg-gray-800 hover:bg-gray-700 transition">Cancel</button>
            <button type="submit" id="create-project" class="px-6 py-2 rounded-lg text-white bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 transition flex items-center">
              <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path>
              </svg>
              Create Project
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <footer class="mt-8 pt-6 pb-12 text-center text-text-dim text-sm">
    <p>Â© 2023 ProjectHub. All rights reserved.</p>
    <p class="mt-2">
      <a href="#" id="debug-toggle" class="text-text-dim hover:text-text-light opacity-50">Debug</a>
    </p>
    
    <!-- Debug Section (Hidden by Default) -->
    <div id="debug-panel" class="mt-4 p-4 border border-gray-800 rounded-lg bg-gray-900 hidden">
      <h3 class="text-lg font-medium text-text-light mb-2">Debug Tools</h3>
      <div class="flex justify-center space-x-4">
        <button id="sync-progress-btn" class="px-4 py-2 rounded-lg text-white bg-primary hover:bg-primary/90 transition text-sm">
          Sync Project Progress
        </button>
        <button id="reset-progress-btn" class="px-4 py-2 rounded-lg text-white bg-warning hover:bg-warning/90 transition text-sm">
          Reset Empty Projects
        </button>
      </div>
    </div>
  </footer>

  <script>
    // Add particles to background
    function createParticles() {
      const container = document.getElementById('particles-container');
      const particleCount = 50;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        
        // Random size between 2-6px
        const size = Math.random() * 4 + 2;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        
        // Random position
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.top = `${Math.random() * 100}%`;
        
        // Random animation duration between 10-20s
        const duration = Math.random() * 10 + 10;
        particle.style.animationDuration = `${duration}s`;
        
        // Random delay so they don't all move at once
        particle.style.animationDelay = `${Math.random() * 5}s`;
        
        container.appendChild(particle);
      }
    }
    
    // Validate token before loading data
    async function validateToken() {
      try {
        const token = localStorage.getItem('token') || sessionStorage.getItem('token');
        
        if (!token) {
          console.log('No token found, redirecting to login');
          window.location.href = 'creative-login.html';
          return false;
        }
        
        console.log('Validating token...');
        
        const response = await fetch('/api/check-token', {
          method: 'GET',
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          }
        });
        
        console.log('Token validation response status:', response.status);
        
        if (response.status === 401) {
          console.log('Token invalid or expired');
          // Clear invalid tokens
          localStorage.removeItem('token');
          localStorage.removeItem('user');
          sessionStorage.removeItem('token');
          sessionStorage.removeItem('user');
          
          showAlert('Your session has expired. Please log in again.', 'error');
          setTimeout(() => {
            window.location.href = 'creative-login.html';
          }, 1500);
          return false;
        }
        
        const data = await response.json();
        console.log('Token validation response:', data);
        
        if (!data.success) {
          console.log('Token validation failed');
          showAlert('Authentication failed. Please log in again.', 'error');
          setTimeout(() => {
            window.location.href = 'creative-login.html';
          }, 1500);
          return false;
        }
        
        console.log('Token validation successful');
        return true;
      } catch (error) {
        console.error('Error validating token:', error);
        showAlert('Error checking authentication. Please try again.', 'error');
        return false;
      }
    }

    // Load user data and projects
    document.addEventListener('DOMContentLoaded', async function() {
      // Create particles for background effect
      createParticles();
      
      // Validate token first
      const isTokenValid = await validateToken();
      
      if (isTokenValid) {
        // Load user data and projects
        loadUserData();
        
        // Initialize theme toggle
        initThemeToggle();
        
        // Handle new project form submission
        document.getElementById('new-project-form').addEventListener('submit', function(e) {
          e.preventDefault();
          createProject();
        });
      }
    });

    // Load user data from storage and fetch projects
    async function loadUserData() {
      // Get token and user data from storage
      const token = localStorage.getItem('token') || sessionStorage.getItem('token');
      const user = JSON.parse(localStorage.getItem('user') || sessionStorage.getItem('user') || '{}');
      
      // Redirect to login if no token or user data found
      if (!token || !user.name) {
        window.location.href = 'creative-login.html';
        return;
      }
      
      // Update user name in welcome message
      const desktopWelcome = document.querySelector('.hidden.md\\:flex.items-center span span');
      const mobileWelcome = document.querySelector('.md\\:hidden.mb-6 span');
      
      if (desktopWelcome) desktopWelcome.textContent = user.name.split(' ')[0];
      if (mobileWelcome) mobileWelcome.textContent = user.name.split(' ')[0];
      
      // Update profile image
      const profileImages = document.querySelectorAll('.rounded-full.overflow-hidden img');
      profileImages.forEach(img => {
        img.src = user.avatar || `https://ui-avatars.com/api/?name=${user.name.replace(' ', '+')}&background=random`;
      });
      
      // Load users for team members dropdown
      try {
        // Replace hardcoded team members with users from the API
        const response = await fetch('/api/admin/users', {
          method: 'GET',
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          }
        });
        
        if (response.ok) {
          const data = await response.json();
          if (data.success && data.users) {
            const teamMembersSelect = document.getElementById('team-members');
            
            // Clear existing options
            teamMembersSelect.innerHTML = '';
            
            // Add users as options
            data.users.forEach(user => {
              const option = document.createElement('option');
              option.value = user.id;
              option.textContent = user.name;
              teamMembersSelect.appendChild(option);
            });
          }
        }
      } catch (error) {
        console.error('Error loading users for team members dropdown:', error);
        // Keep the default options if we can't load real users
      }
      
      // Fetch projects from the server
      fetchProjects();
    }

    // Fetch projects from the API
    async function fetchProjects() {
      try {
        // Get token from storage
        const token = localStorage.getItem('token') || sessionStorage.getItem('token');
        
        if (!token) {
          window.location.href = 'creative-login.html';
          return;
        }
        
        // Show loading state
        const projectContainer = document.querySelector('#active-projects-container');
        if (projectContainer) {
          projectContainer.innerHTML = `
            <div class="w-full p-8 text-center">
              <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
              <p class="mt-2 text-slate-400">Loading projects...</p>
            </div>
          `;
        }
        
        console.log('Fetching projects with token:', token);
        
        // Fetch projects from backend API
        const response = await fetch('/api/projects', {
          method: 'GET',
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          }
        });
        
        console.log('Response status:', response.status);
        
        const data = await response.json();
        console.log('Projects data:', data);
        
        if (!data.success) {
          throw new Error(data.message || 'Failed to fetch projects');
        }
        
        // Filter active projects
        const projects = data.projects || [];
        const activeProjects = projects.filter(project => project.progress < 100);
        const completedProjects = projects.filter(project => project.progress === 100);
        
        // Update stats
        updateDashboardStats({
          activeProjects: activeProjects.length,
          completedProjects: completedProjects.length,
          upcomingDeadlines: activeProjects.filter(p => {
            const today = new Date();
            today.setHours(0, 0, 0, 0); // Reset time to beginning of day
            const dueDate = new Date(p.dueDate);
            dueDate.setHours(23, 59, 59, 999); // Set to end of day
            const diffTime = dueDate - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            // Include today (0) and next 7 days
            return diffDays >= 0 && diffDays <= 7;
          }).length,
          teamMembers: getUniqueTeamMembersCount(projects)
        });
        
        // Display projects or show empty state
        if (activeProjects.length > 0) {
          displayProjects(activeProjects);
        } else {
          showEmptyStates();
        }
      } catch (error) {
        console.error('Error fetching projects:', error);
        showAlert('Unable to load projects. Please try again.', 'error');
        showEmptyStates();
      }
    }

    // Get unique team members count from all projects
    function getUniqueTeamMembersCount(projects) {
      const uniqueMembers = new Set();
      
      projects.forEach(project => {
        if (project.teamMembers && Array.isArray(project.teamMembers)) {
          project.teamMembers.forEach(member => {
            if (typeof member === 'string') {
              uniqueMembers.add(member);
            } else if (typeof member === 'object' && member.name) {
              uniqueMembers.add(member.name);
            }
          });
        }
      });
      
      return uniqueMembers.size || 5; // Default to 5 if no members found
    }

    // Display projects 
    function displayProjects(projects) {
      // Get the active projects container
      const activeProjectsContainer = document.querySelector('#active-projects-container');
      
      // Clear the container
      if (activeProjectsContainer) {
        activeProjectsContainer.innerHTML = '';
      } else {
        console.error('Active projects container not found');
        return;
      }
      
      // If no projects, show empty state
      if (projects.length === 0) {
        showEmptyStates();
        return;
      }
      
      // Create and append project cards
      projects.forEach(project => {
        const card = createProjectCard(project);
        activeProjectsContainer.appendChild(card);
      });
    }

    // Create a single project card
    function createProjectCard(project) {
      // Calculate days remaining
      const today = new Date();
      today.setHours(0, 0, 0, 0); // Reset time to beginning of day for accurate day calculation
      const dueDate = new Date(project.dueDate);
      dueDate.setHours(23, 59, 59, 999); // Set to end of day
      const diffTime = dueDate - today;
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      
      // Format due date message
      let dueDateText;
      if (diffDays < 0) {
        dueDateText = `${Math.abs(diffDays)} days overdue`;
      } else if (diffDays === 0) {
        dueDateText = 'Due today';
      } else {
        dueDateText = `Due in ${diffDays} days`;
      }
      
      // Create card element
      const card = document.createElement('div');
      card.className = 'project-card glass-card border border-gray-800 overflow-hidden shadow-card group hover:shadow-lg transition relative';
      card.setAttribute('data-project-id', project.id);
      
      // Generate a random gradient color
      const gradients = [
        'from-primary to-accent',
        'from-accent to-success',
        'from-warning to-secondary',
        'from-secondary to-primary'
      ];
      const randomGradient = gradients[Math.floor(Math.random() * gradients.length)];
      
      // Format card content
      card.innerHTML = `
        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r ${randomGradient}"></div>
        <div class="p-6">
          <div class="flex justify-between items-start mb-4">
            <h3 class="text-xl font-bold text-text-light">${project.name}</h3>
            <span class="px-2.5 py-0.5 rounded-full text-xs font-medium ${getPriorityClass(project.priority)}">
              ${project.priority} Priority
            </span>
          </div>
          
          <p class="text-text-dim text-sm mb-6">${project.description || 'No description available.'}</p>
          
          <div class="mb-4">
            <div class="flex justify-between text-xs mb-1">
              <span class="text-text-dim">Progress</span>
              <span class="text-accent">${project.progress}%</span>
            </div>
            <div class="w-full h-2 bg-gray-800 rounded-full overflow-hidden">
              <div class="h-full bg-gradient-to-r ${randomGradient} rounded-full" style="width: ${project.progress}%"></div>
            </div>
          </div>
          
          <div class="flex justify-between items-center">
            <div class="flex -space-x-2">
              ${renderTeamMembers(project.teamMembers)}
            </div>
            
            <div class="text-text-dim text-sm ${diffDays < 0 ? 'text-danger' : ''}">${dueDateText}</div>
          </div>
          
          <!-- Buttons that appear on hover -->
          <div class="absolute inset-x-0 bottom-0 h-14 bg-gradient-to-t from-dark-card to-transparent flex items-center justify-center gap-3 opacity-0 group-hover:opacity-100 transition-opacity translate-y-4 group-hover:translate-y-0 duration-300">
            <a href="view-project.html?id=${project.id}" class="px-4 py-2 rounded-lg text-white bg-primary hover:bg-primary/80 transition text-sm">View</a>
            <button class="px-4 py-2 rounded-lg text-white bg-gray-700 hover:bg-gray-600 transition text-sm edit-project-btn" data-project-id="${project.id}">Edit</button>
          </div>
        </div>
      `;
      
      // Add event listener for edit button
      const editBtn = card.querySelector('.edit-project-btn');
      if (editBtn) {
        editBtn.addEventListener('click', () => {
          editProject(project.id);
        });
      }
      
      return card;
    }

    // Render team members avatars
    function renderTeamMembers(teamMembers) {
      console.log("Team members to render:", teamMembers);
      
      if (!teamMembers || !Array.isArray(teamMembers) || teamMembers.length === 0) {
        return '<div class="w-8 h-8 rounded-full border-2 border-gray-800 bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-xs text-white font-bold">U</div>';
      }
      
      // Display up to 3 team members
      const membersToShow = teamMembers.slice(0, 3);
      let html = '';
      
      membersToShow.forEach(member => {
        let name;
        if (typeof member === 'string') {
          name = member;
        } else if (member && typeof member === 'object') {
          name = member.name || 'User';
        } else {
          name = 'User';
        }
        
        const initial = name.charAt(0).toUpperCase();
        
        html += `
          <div class="w-8 h-8 rounded-full border-2 border-gray-800 bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-xs text-white font-bold" title="${name}">
            ${initial}
          </div>
        `;
      });
      
      // Add a +X icon if there are more members
      if (teamMembers.length > 3) {
        html += `
          <div class="w-8 h-8 rounded-full flex items-center justify-center bg-gray-800 text-xs text-text-dim" title="${teamMembers.length - 3} more team members">
            +${teamMembers.length - 3}
          </div>
        `;
      }
      
      return html;
    }

    // Edit project (placeholder for now)
    function editProject(projectId) {
      alert('Edit project functionality coming soon!');
    }

    // Get CSS class based on priority
    function getPriorityClass(priority) {
      const priorityLower = typeof priority === 'string' ? priority.toLowerCase() : '';
      
      switch(priorityLower) {
        case 'high':
          return 'bg-primary/20 text-primary';
        case 'medium':
          return 'bg-warning/20 text-warning';
        case 'low':
          return 'bg-success/20 text-success';
        default:
          return 'bg-primary/20 text-primary';
      }
    }

    // Create a new project
    async function createProject() {
      // Get form values
      const projectName = document.getElementById('project-name').value.trim();
      const projectDescription = document.getElementById('project-description').value.trim();
      const projectPriority = document.getElementById('project-priority').value;
      const projectStartDate = document.getElementById('start-date').value;
      const projectDueDate = document.getElementById('end-date').value;
      const projectObjectives = document.getElementById('project-objectives')?.value.trim();
      
      // Get selected team members
      const teamMembersSelect = document.getElementById('team-members');
      const selectedTeamMembers = Array.from(teamMembersSelect.selectedOptions).map(option => {
        return {
          name: option.text,
          role: 'Team Member'
        };
      });
      
      // Validate inputs
      if (!projectName) {
        showAlert('Please enter a project name', 'error');
        return;
      }
      
      if (!projectDueDate) {
        showAlert('Please select a due date', 'error');
        return;
      }
      
      // Get token from storage
      const token = localStorage.getItem('token') || sessionStorage.getItem('token');
      if (!token) {
        showAlert('Authentication required. Please log in again.', 'error');
        setTimeout(() => {
          window.location.href = 'creative-login.html';
        }, 1500);
        return;
      }
      
      // Get current user
      const user = JSON.parse(localStorage.getItem('user') || sessionStorage.getItem('user') || '{}');
      
      // Create team members array with current user as project owner
      const teamMembers = [
        { name: user.name, role: 'Project Owner' }
      ];
      
      // Add selected team members
      selectedTeamMembers.forEach(member => {
        if (member.name !== user.name) { // Avoid duplicating the current user
          teamMembers.push(member);
        }
      });
      
      // Prepare project data
      const projectData = {
        name: projectName,
        description: projectDescription,
        priority: projectPriority,
        startDate: projectStartDate || new Date().toISOString().split('T')[0],
        endDate: projectDueDate,
        objectives: projectObjectives ? projectObjectives.split('\n').filter(obj => obj.trim() !== '') : [],
        teamMembers: teamMembers
      };
      
      try {
        console.log('Creating project with token:', token);
        console.log('Project data:', projectData);
        
        // Show loading state on button
        const submitBtn = document.querySelector('#new-project-form button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.disabled = true;
        submitBtn.innerHTML = `
          <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          Creating Project...
        `;
        
        // Send project data to the server
        const response = await fetch('/api/projects', {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(projectData)
        });
        
        console.log('Creation response status:', response.status);
        
        // Reset button state
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalText;
        
        const data = await response.json();
        console.log('Creation response data:', data);
        
        if (!data.success) {
          throw new Error(data.message || 'Failed to create project');
        }
        
        // Close modal and show success message
        closeModalFunc();
        showAlert('Project created successfully!', 'success');
        
        // Reload projects
        fetchProjects();
        
        // Reset form fields
        document.getElementById('new-project-form').reset();
      } catch (error) {
        console.error('Error creating project:', error);
        showAlert(error.message || 'Failed to create project. Please try again.', 'error');
      }
    }

    // Dark/Light mode toggle
    function initThemeToggle() {
      const themeToggle = document.getElementById('theme-toggle');
      const lightIcon = document.getElementById('light-icon');
      const darkIcon = document.getElementById('dark-icon');
      
      // Check if user has a theme preference in localStorage
      const userTheme = localStorage.getItem('theme');
      const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      
      if (userTheme === 'light' || (!userTheme && !systemPrefersDark)) {
        document.documentElement.classList.add('light-mode');
        lightIcon.classList.remove('hidden');
        darkIcon.classList.add('hidden');
      } else {
        document.documentElement.classList.remove('light-mode');
        lightIcon.classList.add('hidden');
        darkIcon.classList.remove('hidden');
      }
      
      themeToggle.addEventListener('click', function() {
        const isLightMode = document.documentElement.classList.toggle('light-mode');
        
        if (isLightMode) {
          lightIcon.classList.remove('hidden');
          darkIcon.classList.add('hidden');
          localStorage.setItem('theme', 'light');
        } else {
          lightIcon.classList.add('hidden');
          darkIcon.classList.remove('hidden');
          localStorage.setItem('theme', 'dark');
        }
      });
    }
    
    // Toggle the profile dropdown
    document.querySelector('.profile-dropdown-button')?.addEventListener('click', function() {
      const dropdown = document.getElementById('profile-dropdown');
      dropdown.classList.toggle('hidden');
    });
    
    // Close the dropdown when clicking outside
    document.addEventListener('click', function(event) {
      const dropdown = document.getElementById('profile-dropdown');
      const dropdownButton = document.querySelector('.profile-dropdown-button');
      
      if (dropdownButton && !dropdownButton.contains(event.target) && !dropdown.contains(event.target)) {
        dropdown.classList.add('hidden');
      }
    });
    
    // Handle logout
    document.querySelector('[data-action="logout"]')?.addEventListener('click', function(e) {
      e.preventDefault();
      
      // Clear user data
      localStorage.removeItem('token');
      localStorage.removeItem('user');
      sessionStorage.removeItem('token');
      sessionStorage.removeItem('user');
      
      // Redirect to login
      window.location.href = 'creative-login.html';
    });
    
    // New Project Modal functionality
    const newProjectModal = document.getElementById('new-project-modal');
    const modalContent = document.getElementById('modal-content');
    const closeModal = document.getElementById('close-modal');
    const cancelProject = document.getElementById('cancel-project');
    
    function openModal() {
      // Show modal
      newProjectModal.classList.remove('hidden');
      newProjectModal.classList.add('flex');
      
      // Animate in
      setTimeout(() => {
        modalContent.classList.remove('scale-90', 'opacity-0');
        modalContent.classList.add('scale-100', 'opacity-100');
      }, 10);
    }
    
    function closeModalFunc() {
      // Animate out
      modalContent.classList.remove('scale-100', 'opacity-100');
      modalContent.classList.add('scale-90', 'opacity-0');
      
      // Hide modal after animation
      setTimeout(() => {
        newProjectModal.classList.remove('flex');
        newProjectModal.classList.add('hidden');
      }, 300);
    }
    
    // Add event listener for the "Add Project" button in the header
    document.getElementById('new-project-btn-inline')?.addEventListener('click', openModal);
    
    closeModal.addEventListener('click', closeModalFunc);
    cancelProject.addEventListener('click', closeModalFunc);
    
    // Close modal when clicking outside
    newProjectModal.addEventListener('click', function(event) {
      if (event.target === newProjectModal) {
        closeModalFunc();
      }
    });
    
    // Show empty states for projects
    function showEmptyStates() {
      // Clear any existing project cards
      const activeProjectsContainer = document.getElementById('active-projects-container');
      const pastProjectsContainer = document.getElementById('past-projects-container');
      
      // Keep only the empty state in each container
      const activeProjectsEmpty = document.getElementById('active-projects-empty');
      const pastProjectsEmpty = document.getElementById('past-projects-empty');
      
      if (activeProjectsContainer && activeProjectsEmpty) {
        // Get all elements except the empty state
        const activeProjectCards = Array.from(activeProjectsContainer.children).filter(
          child => child.id !== 'active-projects-empty'
        );
        
        // Remove active project cards
        activeProjectCards.forEach(card => card.remove());
        
        // Show empty state
        activeProjectsEmpty.style.display = 'block';
      }
      
      if (pastProjectsContainer && pastProjectsEmpty) {
        // Get all elements except the empty state
        const pastProjectCards = Array.from(pastProjectsContainer.children).filter(
          child => child.id !== 'past-projects-empty'
        );
        
        // Remove past project cards
        pastProjectCards.forEach(card => card.remove());
        
        // Show empty state
        pastProjectsEmpty.style.display = 'block';
      }
    }
    
    // Update dashboard stats based on projects data
    function updateDashboardStats(stats) {
      // Get the stats elements
      const statsElements = {
        activeProjects: document.querySelector('[data-stat="active-projects"]'),
        completedProjects: document.querySelector('[data-stat="completed-projects"]'),
        upcomingDeadlines: document.querySelector('[data-stat="upcoming-deadlines"]'),
        teamMembers: document.querySelector('[data-stat="team-members"]')
      };
      
      // Update stats if elements exist
      if (statsElements.activeProjects) statsElements.activeProjects.textContent = stats.activeProjects || 0;
      if (statsElements.completedProjects) statsElements.completedProjects.textContent = stats.completedProjects || 0;
      if (statsElements.upcomingDeadlines) statsElements.upcomingDeadlines.textContent = stats.upcomingDeadlines || 0;
      if (statsElements.teamMembers) statsElements.teamMembers.textContent = stats.teamMembers || 0;
      
      console.log('Updated dashboard stats:', stats);
    }
    
    // Show alert/notification function
    function showAlert(message, type = 'info') {
      // Check if alert container exists, if not create it
      let alertContainer = document.getElementById('alert-container');
      if (!alertContainer) {
        alertContainer = document.createElement('div');
        alertContainer.id = 'alert-container';
        alertContainer.className = 'fixed bottom-4 right-4 z-50 flex flex-col gap-2';
        document.body.appendChild(alertContainer);
      }
      
      // Create alert element
      const alert = document.createElement('div');
      alert.className = 'p-4 rounded-lg shadow-lg flex items-center transition-all duration-500 transform translate-x-full';
      
      // Set color based on type
      if (type === 'success') {
        alert.classList.add('bg-green-600', 'text-white');
      } else if (type === 'error') {
        alert.classList.add('bg-red-600', 'text-white');
      } else {
        alert.classList.add('bg-primary', 'text-white');
      }
      
      // Set icon based on type
      const icon = type === 'success' 
        ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />'
        : type === 'error'
          ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />'
          : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />';
      
      // Set HTML content
      alert.innerHTML = `
        <div class="mr-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            ${icon}
          </svg>
        </div>
        <div>${message}</div>
      `;
      
      // Add to container
      alertContainer.appendChild(alert);
      
      // Animate in
      setTimeout(() => {
        alert.classList.remove('translate-x-full');
      }, 10);
      
      // Automatically remove after 3 seconds
      setTimeout(() => {
        alert.classList.add('translate-x-full', 'opacity-0');
        setTimeout(() => {
          alert.remove();
        }, 300);
      }, 3000);
    }

    // Initialize debug panel
    document.addEventListener('DOMContentLoaded', function() {
      const debugToggle = document.getElementById('debug-toggle');
      const debugPanel = document.getElementById('debug-panel');
      const syncProgressBtn = document.getElementById('sync-progress-btn');
      const resetProgressBtn = document.getElementById('reset-progress-btn');
      
      // Toggle debug panel
      if (debugToggle && debugPanel) {
        debugToggle.addEventListener('click', function(e) {
          e.preventDefault();
          debugPanel.classList.toggle('hidden');
        });
      }
      
      // Sync progress button
      if (syncProgressBtn) {
        syncProgressBtn.addEventListener('click', async function() {
          try {
            const token = localStorage.getItem('token') || sessionStorage.getItem('token');
            
            // Show loading state
            syncProgressBtn.disabled = true;
            syncProgressBtn.innerHTML = 'Syncing...';
            
            // Call the API to sync progress
            const response = await fetch('/api/debug/sync-progress', {
              method: 'POST',
              headers: {
                'Authorization': `Bearer ${token}`,
                'Content-Type': 'application/json'
              }
            });
            
            // Reset button state
            syncProgressBtn.disabled = false;
            syncProgressBtn.innerHTML = 'Sync Project Progress';
            
            if (!response.ok) {
              throw new Error('Failed to sync progress');
            }
            
            const data = await response.json();
            
            if (data.success) {
              showAlert(data.message, 'success');
              // Reload projects to show the updated progress
              fetchProjects();
            } else {
              throw new Error(data.message || 'Failed to sync progress');
            }
          } catch (error) {
            console.error('Error syncing progress:', error);
            showAlert(`Error: ${error.message}`, 'error');
          }
        });
      }
      
      // Reset progress button
      if (resetProgressBtn) {
        resetProgressBtn.addEventListener('click', async function() {
          try {
            const token = localStorage.getItem('token') || sessionStorage.getItem('token');
            
            // Show loading state
            resetProgressBtn.disabled = true;
            resetProgressBtn.innerHTML = 'Resetting...';
            
            // Call the API to reset progress
            const response = await fetch('/api/debug/reset-progress', {
              method: 'POST',
              headers: {
                'Authorization': `Bearer ${token}`,
                'Content-Type': 'application/json'
              }
            });
            
            // Reset button state
            resetProgressBtn.disabled = false;
            resetProgressBtn.innerHTML = 'Reset Empty Projects';
            
            if (!response.ok) {
              throw new Error('Failed to reset progress');
            }
            
            const data = await response.json();
            
            if (data.success) {
              showAlert(data.message, 'success');
              // Reload projects to show the updated progress
              fetchProjects();
            } else {
              throw new Error(data.message || 'Failed to reset progress');
            }
          } catch (error) {
            console.error('Error resetting progress:', error);
            showAlert(`Error: ${error.message}`, 'error');
          }
        });
      }
    });
  </script>
</body>
</html> 